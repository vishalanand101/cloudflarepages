<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - PhysicsWorld</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.18/auth0-spa-js.production.js"></script>
    <script defer src="js/dashboard.js"></script>
    <style>
        /* Add your custom styles */
    </style>
</head>

<body>
    <div class="overlay"></div>
    <div class="content-container">
        <h1>Welcome to the Dashboard</h1>
        <p>Your personal space to explore the universe of physics!</p>

        <div class="user-info">
            <h2 id="username">Loading...</h2>
            <p id="user-email">Email: loading...</p>
            <button id="logout" class="logout-button">Logout</button>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            // Initialize the Auth0 client
            const auth0 = await createAuth0Client({
                domain: 'dev-aw2zto4r1fqzsj8i.us.auth0.com',  // Replace with your Auth0 domain
                client_id: 'Loevn4yrlaE1UkugPQAeeDLQwtTPtoOu',  // Replace with your Auth0 client ID
                redirect_uri: window.location.href,  // This should match the callback URL in the Auth0 dashboard
            });

            // Check if the user is authenticated
            const isAuthenticated = await auth0.isAuthenticated();

            if (isAuthenticated) {
                // Get user details
                const user = await auth0.getUser();
                document.getElementById('username').textContent = `Hello, ${user.name}`;
                document.getElementById('user-email').textContent = `Email: ${user.email}`;

                // Logout function
                document.getElementById('logout').addEventListener('click', async () => {
                    await auth0.logout({
                        returnTo: 'https://neuralnet.co.in/'  // Redirect after logout
                    });
                });
            } else {
                // If not authenticated, redirect to login page
                window.location.href = '/login.html';  // This ensures users are redirected to login if they are not authenticated
            }
        });
    </script>
</body>

</html>
