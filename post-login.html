<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Welcome — My App</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{{font-family:Inter, system-ui, -apple-system, Roboto, "Helvetica Neue", Arial; margin:0;}}
    header{{background:linear-gradient(90deg,#7b61ff,#34d399);color:white;padding:18px 24px;display:flex;align-items:center;justify-content:space-between}}
    .container{{padding:28px;max-width:1000px;margin:0 auto}}
    .hero{{display:flex;gap:18px;align-items:flex-start}}
    .avatar{{width:88px;height:88px;border-radius:12px;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;font-size:32px}}
    .article{{background:#fff;padding:20px;border-radius:10px;box-shadow:0 8px 24px rgba(10,20,30,0.06)}}
    .logout{{background:rgba(255,255,255,0.12);border:none;padding:8px 12px;border-radius:8px;color:white;cursor:pointer}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <div style="width:44px;height:44px;border-radius:8px;background:rgba(0,0,0,0.12);"></div>
      <div><strong>Decoupled Runtime</strong><div style="font-size:12px;opacity:0.9">Experiment dashboard</div></div>
    </div>
    <div>
      <button class="logout" id="logoutBtn">Logout</button>
    </div>
  </header>

  <div class="container">
    <div class="hero">
      <div class="avatar" id="avatar">U</div>
      <div style="flex:1">
        <h2 id="welcome">Welcome</h2>
        <p style="margin-top:6px;color:#555">You're signed in. Below is a short article about the project you wanted to build.</p>
      </div>
    </div>

    <section style="margin-top:18px" class="article">
      <h3>Building a decoupled container runtime — concept</h3>
      <p>This project explores a lightweight, highly modular approach to process isolation where each process runs in its own minimal sandbox rather than sharing a tightly coupled cgroup/chroot/namespace monolith. The idea is to treat processes as composable units that can be wired together with small, focused shims for I/O, networking, and lifecycle management.</p>

      <h4>Key ideas</h4>
      <ul>
        <li><strong>Per-process isolation:</strong> Use namespaces and seccomp filters narrowly per-process; avoid large shared cgroup trees where possible.</li>
        <li><strong>Minimal supervisor:</strong> A tiny supervisor launches and monitors processes, delegating resource shaping to thin adapters.</li>
        <li><strong>Composable adapters:</strong> Networking, storage, and IPC are provided by lightweight adapters that can be composed at runtime.</li>
        <li><strong>Fast startup:</strong> Smaller sandboxes enable faster startup times and simpler failure isolation.</li>
      </ul>

      <h4>Next steps & experiment ideas</h4>
      <ol>
        <li>Prototype a launcher that uses clone(2) with CLONE_NEWPID/NET to create per-process namespaces.</li>
        <li>Use a userspace proxy for networking to avoid heavy kernel-level configs for each sandbox.</li>
        <li>Benchmark start/stop times against a minimal runc-based container.</li>
        <li>Explore secure defaults (seccomp, capabilities) and a policy system for adapters.</li>
      </ol>

      <p style="margin-top:14px;color:#666">Want me to scaffold a prototype repo (systemd-less launcher + example adapter + tests)? Click <a href="#" id="scaffoldLink">here</a>.</p>
    </section>
  </div>

  <script>
    // Basic token parse from hash (if using redirect with token)
    function parseHash() {{
      var h = location.hash.substring(1);
      if(!h) return {{}};
      return h.split('&').reduce(function(acc, part) {{
        var kv = part.split('=');
        acc[kv[0]] = decodeURIComponent(kv[1]||'');
        return acc;
      }}, {{}});
    }}
    var tokens = parseHash();
    var idtoken = tokens.id_token || '';
    if(idtoken) {{
      // naive decode to show name
      try {{
        var payload = JSON.parse(atob(idtoken.split('.')[1].replace(/-/g,'+').replace(/_/g,'/')));
        var name = payload.name || payload.nickname || payload.email || 'User';
        document.getElementById('welcome').innerText = 'Welcome, ' + name;
        document.getElementById('avatar').innerText = (name||'U').charAt(0).toUpperCase();
      }} catch(e){{}}
    }}

    document.getElementById('logoutBtn').addEventListener('click', function(){{
      // clear hash and redirect to Auth0 logout if desired
      location.href = '/logout.html';
    }});
    document.getElementById('scaffoldLink').addEventListener('click', function(e){{
      e.preventDefault();
      alert('I can scaffold a prototype launcher + adapter repo. Tell me which language (C, Go, Rust, Python).');
    }});
  </script>
</body>
</html>
